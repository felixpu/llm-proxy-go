# LLM Proxy 环境配置
# 复制此文件为 .env 并修改配置值

# ============ 服务配置 ============
# 服务监听地址（默认: 0.0.0.0）
LLM_PROXY_HOST=0.0.0.0

# 服务端口（默认: 8000）
LLM_PROXY_PORT=8000

# ============ 性能配置 ============
# 工作进程数（默认: 1，生产环境建议 CPU 核心数 * 2 + 1）
# 注意：workers > 1 时不能启用 reload
LLM_PROXY_WORKERS=1

# Embedding 模型预加载（可选，留空使用默认行为）
# - true/1: 强制预加载（即使多 worker）
# - false/0: 禁止预加载（即使单 worker）
# - 留空: 单 worker 预加载，多 worker 不预加载（避免 CPU 100%）
# LLM_PROXY_PRELOAD_EMBEDDING=

# Keep-Alive 超时（秒，默认: 5）
# 流式响应场景建议调大到 30-60
LLM_PROXY_TIMEOUT_KEEP_ALIVE=5

# 优雅关闭超时（秒，留空使用默认值）
# LLM_PROXY_TIMEOUT_GRACEFUL_SHUTDOWN=30

# ============ 日志配置 ============
# 日志级别: DEBUG, INFO, WARNING, ERROR（默认: INFO）
LOG_LEVEL=INFO

# 是否记录访问日志（默认: true，生产环境高并发可关闭减少 I/O）
LLM_PROXY_ACCESS_LOG=true

# ============ 反向代理配置 ============
# 是否解析 X-Forwarded-* 头（默认: true）
LLM_PROXY_PROXY_HEADERS=true

# 信任的代理 IP（默认: 127.0.0.1）
# 多个用逗号分隔，* 表示信任所有（生产环境慎用）
LLM_PROXY_FORWARDED_ALLOW_IPS=127.0.0.1

# ============ 开发配置 ============
# 热重载（默认: false，仅开发环境使用）
# 注意：reload=true 时 workers 必须为 1
LLM_PROXY_RELOAD=false

# ============ SSL 配置（可选）============
# SSL 密钥文件路径
# LLM_PROXY_SSL_KEYFILE=/path/to/key.pem

# SSL 证书文件路径
# LLM_PROXY_SSL_CERTFILE=/path/to/cert.pem

# SSL 密钥密码（如果密钥文件有密码保护）
# LLM_PROXY_SSL_KEYFILE_PASSWORD=your-password

# ============ 数据库配置 ============
# SQLite 数据库路径（默认: data/llm-proxy.db）
LLM_PROXY_DB=data/llm-proxy.db

# 数据目录（默认: data）
LLM_PROXY_DATA_DIR=data

# 日志目录（默认: logs）
LLM_PROXY_LOGS_DIR=logs

# ============ 安全配置 ============
# 会话加密密钥（生产环境必须修改）
LLM_PROXY_SECRET_KEY=change-this-secret-key-in-production

# 会话过期时间（小时，默认: 24）
LLM_PROXY_SESSION_EXPIRE_HOURS=24

# ============ 速率限制配置 ============
# 是否启用速率限制（默认: true）
LLM_PROXY_RATE_LIMIT_ENABLED=true

# 每个时间窗口最大请求数（默认: 100）
LLM_PROXY_RATE_LIMIT_MAX_REQUESTS=100

# 时间窗口（秒，默认: 60）
LLM_PROXY_RATE_LIMIT_WINDOW_SECONDS=60

# ============ 默认管理员（仅首次启动时创建） ============
# 默认管理员用户名
LLM_PROXY_DEFAULT_ADMIN_USERNAME=admin

# 默认管理员密码（生产环境必须修改）
LLM_PROXY_DEFAULT_ADMIN_PASSWORD=admin123

# ============ 模型下载配置 ============
# HuggingFace 镜像地址（中国大陆用户推荐使用镜像加速下载）
# HF_ENDPOINT=https://hf-mirror.com
